{"version":3,"file":"static/js/15.06759a32.chunk.js","mappings":"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","sources":["components/ApiService/ApiService.js","webpack://goit-react-hw-05-movies/./src/components/views/MoviesPage/MoviesPage.module.css?1a47","components/views/MoviesPage/MoviesPage.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst BASIC_URL = 'https://api.themoviedb.org';\r\nconst KEY = 'd248c3817d332dfccb440b9afc9f42a3';\r\n\r\nexport const ApiService = class {\r\n  constructor() {\r\n    this.page = 1;\r\n  }\r\n\r\n  async fetchTrendingFilms(page) {\r\n    const response = await axios.get(\r\n      `${BASIC_URL}/3/trending/movie/day?api_key=${KEY}&page=${page}`\r\n    );\r\n    return response.data.results;\r\n  }\r\n\r\n  async fetchMovies(searchedMovies, page) {\r\n    const response = await axios.get(\r\n      `${BASIC_URL}/3/search/movie?api_key=${KEY}&language=en-US&query=${searchedMovies}&page=${page}`\r\n    );\r\n    return response.data.results;\r\n  }\r\n\r\n  async getMovieDetails(movieId) {\r\n    const response = await axios.get(\r\n      `${BASIC_URL}/3/movie/${movieId}?api_key=${KEY}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async getMovieDetailsCast(movieId) {\r\n    const response = await axios.get(\r\n      `${BASIC_URL}/3/movie/${movieId}/credits?api_key=${KEY}`\r\n    );\r\n    return response.data.cast;\r\n  }\r\n\r\n  async getMovieDetailsReviews(movieId) {\r\n    const response = await axios.get(\r\n      `${BASIC_URL}/3/movie/${movieId}/reviews?api_key=${KEY}`\r\n    );\r\n    return response.data.results;\r\n  }\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"MoviesPage_form__blAkN\",\"buttonBack\":\"MoviesPage_buttonBack__Yl6aU\",\"input\":\"MoviesPage_input__jswi6\",\"gallery\":\"MoviesPage_gallery__Co1Y6\",\"film\":\"MoviesPage_film__PKsBF\",\"thumb\":\"MoviesPage_thumb__Hl3gH\",\"link\":\"MoviesPage_link__piGPn\",\"navigation\":\"MoviesPage_navigation__vpGRu\",\"button\":\"MoviesPage_button__NBqdt\",\"page\":\"MoviesPage_page__vabjI\"};","import { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ApiService } from '../../ApiService/ApiService';\r\nimport s from './MoviesPage.module.css';\r\nimport poster from '../images/film-null@1x.jpg';\r\n\r\nconst apiService = new ApiService();\r\nconst BASIC_URL = 'https://image.tmdb.org/t/p/w342';\r\n\r\nexport default function MoviesPage() {\r\n  const [input, setInput] = useState('');\r\n  const [search, setSearch] = useState('');\r\n  const [page, setPage] = useState(1);\r\n  const [movies, setMovies] = useState(\r\n    JSON.parse(localStorage.getItem('movies')) ?? []\r\n  );\r\n\r\n  const handleInputChange = e => {\r\n    setInput(e.currentTarget.value.toLowerCase());\r\n  };\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    if (input.trim() === '') {\r\n      alert('Введите запрос в поле поиска!');\r\n      return;\r\n    }\r\n    setSearch(input);\r\n  };\r\n\r\n  const incrementPage = () => {\r\n    setPage(prevPage => prevPage + 1);\r\n  };\r\n\r\n  const decrementPage = () => {\r\n    setPage(prevPage => prevPage - 1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!search) {\r\n      return;\r\n    }\r\n    apiService\r\n      .fetchMovies(search, page)\r\n      .then(setMovies)\r\n      .then(\r\n        window.scrollTo({\r\n          top: 0,\r\n          behavior: 'smooth',\r\n        })\r\n      )\r\n      .catch(error => console.log('Error: ', error.response.status));\r\n  }, [search, page]);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('movies', JSON.stringify(movies));\r\n  }, [movies]);\r\n\r\n  return (\r\n    <>\r\n      <form className={s.form} onSubmit={handleSubmit}>\r\n        <input\r\n          className={s.input}\r\n          type=\"text\"\r\n          name=\"search\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images movies\"\r\n          value={input}\r\n          onChange={handleInputChange}\r\n        />\r\n        <button type=\"submit\" className={s.button}>\r\n          Search\r\n        </button>\r\n      </form>\r\n      <ul className={s.gallery}>\r\n        {movies.length !== 0 &&\r\n          movies.map(movie => (\r\n            <li key={movie.id} className={s.film}>\r\n              <div className={s.thumb}>\r\n                <img\r\n                  src={\r\n                    movie.poster_path\r\n                      ? `${BASIC_URL}${movie.poster_path}`\r\n                      : `${poster}`\r\n                  }\r\n                  alt={movie.original_title}\r\n                />\r\n              </div>\r\n              <Link to={`/movies/${movie.id}`} className={s.link}>\r\n                {movie.title}\r\n              </Link>\r\n            </li>\r\n          ))}\r\n      </ul>\r\n      {movies.length !== 0 && (\r\n        <div className={s.navigation}>\r\n          <button\r\n            type=\"button\"\r\n            disabled={page < 2}\r\n            onClick={decrementPage}\r\n            className={s.button}\r\n          >\r\n            prev\r\n          </button>\r\n          <p className={s.page}>{page}</p>\r\n          <button\r\n            type=\"button\"\r\n            disabled={movies.length < 19}\r\n            onClick={incrementPage}\r\n            className={s.button}\r\n          >\r\n            next\r\n          </button>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":["BASIC_URL","KEY","ApiService","this","page","axios","response","data","results","searchedMovies","movieId","cast","apiService","MoviesPage","useState","input","setInput","search","setSearch","setPage","JSON","parse","localStorage","getItem","movies","setMovies","useEffect","fetchMovies","then","window","scrollTo","top","behavior","catch","error","console","log","status","setItem","stringify","className","s","onSubmit","e","preventDefault","trim","alert","type","name","autoComplete","autoFocus","placeholder","value","onChange","currentTarget","toLowerCase","length","map","movie","src","poster_path","poster","alt","original_title","to","id","title","disabled","onClick","prevPage"],"sourceRoot":""}