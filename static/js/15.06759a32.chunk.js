"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[15],{1007:function(e,t,n){n.d(t,{s:function(){return f}});var a=n(5861),r=n(5671),c=n(3144),s=n(7757),o=n.n(s),i=n(4569),u=n.n(i),l="https://api.themoviedb.org",p="d248c3817d332dfccb440b9afc9f42a3",f=function(){function e(){(0,r.Z)(this,e),this.page=1}return(0,c.Z)(e,[{key:"fetchTrendingFilms",value:function(){var e=(0,a.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("".concat(l,"/3/trending/movie/day?api_key=").concat(p,"&page=").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data.results);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMovies",value:function(){var e=(0,a.Z)(o().mark((function e(t,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("".concat(l,"/3/search/movie?api_key=").concat(p,"&language=en-US&query=").concat(t,"&page=").concat(n));case 2:return a=e.sent,e.abrupt("return",a.data.results);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMovieDetails",value:function(){var e=(0,a.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("".concat(l,"/3/movie/").concat(t,"?api_key=").concat(p));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovieDetailsCast",value:function(){var e=(0,a.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("".concat(l,"/3/movie/").concat(t,"/credits?api_key=").concat(p));case 2:return n=e.sent,e.abrupt("return",n.data.cast);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovieDetailsReviews",value:function(){var e=(0,a.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("".concat(l,"/3/movie/").concat(t,"/reviews?api_key=").concat(p));case 2:return n=e.sent,e.abrupt("return",n.data.results);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},6015:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(8152),r=n(2791),c=n(3504),s=n(1007),o="MoviesPage_form__blAkN",i="MoviesPage_input__jswi6",u="MoviesPage_gallery__Co1Y6",l="MoviesPage_film__PKsBF",p="MoviesPage_thumb__Hl3gH",f="MoviesPage_link__piGPn",v="MoviesPage_navigation__vpGRu",h="MoviesPage_button__NBqdt",m="MoviesPage_page__vabjI",g=n(2973),d=n(184),_=new s.s;function x(){var e,t=(0,r.useState)(""),n=(0,a.Z)(t,2),s=n[0],x=n[1],b=(0,r.useState)(""),k=(0,a.Z)(b,2),y=k[0],w=k[1],j=(0,r.useState)(1),N=(0,a.Z)(j,2),M=N[0],S=N[1],P=(0,r.useState)(null!==(e=JSON.parse(localStorage.getItem("movies")))&&void 0!==e?e:[]),Z=(0,a.Z)(P,2),C=Z[0],D=Z[1];return(0,r.useEffect)((function(){y&&_.fetchMovies(y,M).then(D).then(window.scrollTo({top:0,behavior:"smooth"})).catch((function(e){return console.log("Error: ",e.response.status)}))}),[y,M]),(0,r.useEffect)((function(){localStorage.setItem("movies",JSON.stringify(C))}),[C]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("form",{className:o,onSubmit:function(e){e.preventDefault(),""!==s.trim()?w(s):alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441 \u0432 \u043f\u043e\u043b\u0435 \u043f\u043e\u0438\u0441\u043a\u0430!")},children:[(0,d.jsx)("input",{className:i,type:"text",name:"search",autoComplete:"off",autoFocus:!0,placeholder:"Search images movies",value:s,onChange:function(e){x(e.currentTarget.value.toLowerCase())}}),(0,d.jsx)("button",{type:"submit",className:h,children:"Search"})]}),(0,d.jsx)("ul",{className:u,children:0!==C.length&&C.map((function(e){return(0,d.jsxs)("li",{className:l,children:[(0,d.jsx)("div",{className:p,children:(0,d.jsx)("img",{src:e.poster_path?"".concat("https://image.tmdb.org/t/p/w342").concat(e.poster_path):"".concat(g),alt:e.original_title})}),(0,d.jsx)(c.rU,{to:"/movies/".concat(e.id),className:f,children:e.title})]},e.id)}))}),0!==C.length&&(0,d.jsxs)("div",{className:v,children:[(0,d.jsx)("button",{type:"button",disabled:M<2,onClick:function(){S((function(e){return e-1}))},className:h,children:"prev"}),(0,d.jsx)("p",{className:m,children:M}),(0,d.jsx)("button",{type:"button",disabled:C.length<19,onClick:function(){S((function(e){return e+1}))},className:h,children:"next"})]})]})}},2973:function(e,t,n){e.exports=n.p+"static/media/film-null@1x.4730a5321756b1119af7.jpg"}}]);
//# sourceMappingURL=15.06759a32.chunk.js.map